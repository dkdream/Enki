(require "boot.ea")

dump

(dumpln (~ 1))
(dumpln "1")
(dumpln '1)
(dumpln (type-of 1))
(dumpln (type-of 'one))
(dumpln nil)
(dumpln (type-of [1 2 3 4]))

(define ttest [1 2 3 4])

(assert (iso 10 :integer (type-of 1)))
(assert (iso 10 :text    (type-of "1")))
(assert (iso 10 'symbol  (type-of 'val)))
(assert (iso 10 nil      (type-of nil)) "nil is not type nil")
(assert (iso 10 :primitive (type-of println)))
(assert (iso 10 :fixed    (type-of let)))
(assert (iso 10 :tuple    (type-of ttest)))
(assert (iso 10 ttest     (type-of ttest :iseq)))
(assert (iso 10 :iseq     (type-of ttest)))

(define fooness 'fooness)

(assert (iso 10 'symbol (type-of fooness)))
(assert (iso 10 fooness (type-of fooness :fooness)))
(assert (iso 10 'symbol (type-of fooness)))

(define barness :barness)

(assert (iso 10 'base   (type-of barness)))
(assert (iso 10 barness (type-of barness :fooness)))
(assert (iso 10 'base   (type-of barness)))

(define barness (lambda (ok)
                  (dumpln ok)
                  (println (type-of ok))
                  1
                  ))

(println (barness "testing"))

(let ((xxx 1)(yyy 2))
  (dumpln (environment 'current)))

